package piatek.jacek;

import static org.junit.Assert.*;

import org.junit.BeforeClass;
import org.junit.Test;

import com.tictactec.ta.lib.Core;
import com.tictactec.ta.lib.MAType;
import com.tictactec.ta.lib.MInteger;
import com.tictactec.ta.lib.RetCode;

public class TestCore {

	static Core core;

	@BeforeClass
	public static void BeforeClass() {
		core = new Core();

	}

	@Test
	public void testMinMaxIndexDouble() {
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		int[] outMinIdx = new int[1];
		int[] outMaxIdx = new int[1];
		/*
		 * Odejmujemy -1 od nr indeksu, który wyszed³ w excelu, poniewa¿ tutaj
		 * tablica liczy siê od 0, a w excelu o 1
		 */
		int[] expectedMin = { 35 - 1 };
		int[] expectedMax = { 53 - 1 };

		RetCode rc = core.minMaxIndex(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outMinIdx, outMaxIdx);

		assertArrayEquals(expectedMin, outMinIdx);
		assertArrayEquals(expectedMax, outMaxIdx);
	}

	@Test
	public void testMinMaxIndexFloat() {
		float[] inputsinReal = new float[] { 5.13f, 2.08f, -2.71f, 6.56f,
				5.29f, 3.3f, 6.33f, -2.52f, 1.5f, 4.83f, -2.37f, -2.86f,
				-1.33f, 5.55f, 6.81f, -2.75f, -3.6f, 0.57f, 9.07f, 5.01f,
				0.76f, 7.46f, -1.1f, -2.11f, -0.55f, 5.4f, -4.42f, 7.62f,
				3.73f, 7.23f, 2.79f, 4.63f, 3.53f, 1.42f, -4.22f, 9.9f, 9.76f,
				8.47f, 1.08f, 9f, 0.79f, -4.58f, -1.93f, 8.55f, 7.56f, 4.37f,
				-2.92f, -1.04f, -1.73f, 0.01f, 8.47f, -3.51f, 9.74f, 9.45f,
				2.59f, 6.46f, 5.27f, 5.96f, -3.67f, 3.11f, -3.55f, 9.95f,
				3.41f, 6.57f, 8.57f, 1.89f, 1.53f, 7.22f, 6.5f, 0.28f, 8.45f,
				1.02f, 1.42f, 4.39f, -1.57f, -1.12f, 4.79f, -3.62f, 3.77f,
				2.41f, 3.44f, 4.38f, 0.78f, 8.81f, 5.85f, -1.57f, -3.81f,
				4.59f, -0.53f, 1.86f, 3.76f, 2.6f, 0.59f, -3.23f, 6.78f, 3.97f,
				-0.25f, 3.9f, 1.13f, -0.86f };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		int[] outMinIdx = new int[1];
		int[] outMaxIdx = new int[1];
		/*
		 * Odejmujemy -1 od nr indeksu, który wyszed³ w excelu, poniewa¿ tutaj
		 * tablica liczy siê od 0, a w excelu o 1
		 */
		int[] expectedMin = { 42 - 1 };
		int[] expectedMax = { 62 - 1 };

		RetCode rc = core.minMaxIndex(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outMinIdx, outMaxIdx);

		assertArrayEquals(expectedMin, outMinIdx);
		assertArrayEquals(expectedMax, outMaxIdx);
	}

	@Test
	public void testMinIndexDouble() {
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		int[] outInteger = new int[1];
		int[] expectedMin = { 35 - 1 };

		RetCode rc = core.minIndex(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outInteger);
		assertArrayEquals(expectedMin, outInteger);
	}

	@Test
	public void testMaxIndexDouble() {
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		int[] outInteger = new int[1];
		int[] expectedMax = { 53 - 1 };

		RetCode rc = core.maxIndex(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outInteger);
		assertArrayEquals(expectedMax, outInteger);
	}

	@Test
	public void testMinDouble() {
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outDouble = new double[1];
		double[] expectedMin = { -4.83669727 };

		RetCode rc = core.min(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outDouble);
		assertArrayEquals(expectedMin, outDouble, 0);
	}

	@Test
	public void testMaxDouble() {
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outDouble = new double[1];
		double[] expectedMax = { 9.99706536 };

		RetCode rc = core.max(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outDouble);
		assertArrayEquals(expectedMax, outDouble, 0);
	}

	@Test
	public void testMinIndexFloat() {
		float[] inputsinReal = new float[] { 5.13f, 2.08f, -2.71f, 6.56f,
				5.29f, 3.3f, 6.33f, -2.52f, 1.5f, 4.83f, -2.37f, -2.86f,
				-1.33f, 5.55f, 6.81f, -2.75f, -3.6f, 0.57f, 9.07f, 5.01f,
				0.76f, 7.46f, -1.1f, -2.11f, -0.55f, 5.4f, -4.42f, 7.62f,
				3.73f, 7.23f, 2.79f, 4.63f, 3.53f, 1.42f, -4.22f, 9.9f, 9.76f,
				8.47f, 1.08f, 9f, 0.79f, -4.58f, -1.93f, 8.55f, 7.56f, 4.37f,
				-2.92f, -1.04f, -1.73f, 0.01f, 8.47f, -3.51f, 9.74f, 9.45f,
				2.59f, 6.46f, 5.27f, 5.96f, -3.67f, 3.11f, -3.55f, 9.95f,
				3.41f, 6.57f, 8.57f, 1.89f, 1.53f, 7.22f, 6.5f, 0.28f, 8.45f,
				1.02f, 1.42f, 4.39f, -1.57f, -1.12f, 4.79f, -3.62f, 3.77f,
				2.41f, 3.44f, 4.38f, 0.78f, 8.81f, 5.85f, -1.57f, -3.81f,
				4.59f, -0.53f, 1.86f, 3.76f, 2.6f, 0.59f, -3.23f, 6.78f, 3.97f,
				-0.25f, 3.9f, 1.13f, -0.86f };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		int[] outInteger = new int[1];
		int[] expectedMin = { 42 - 1 };

		RetCode rc = core.minIndex(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outInteger);
		assertArrayEquals(expectedMin, outInteger);
	}

	@Test
	public void testMaxIndexFloat() {
		float[] inputsinReal = new float[] { 5.13f, 2.08f, -2.71f, 6.56f,
				5.29f, 3.3f, 6.33f, -2.52f, 1.5f, 4.83f, -2.37f, -2.86f,
				-1.33f, 5.55f, 6.81f, -2.75f, -3.6f, 0.57f, 9.07f, 5.01f,
				0.76f, 7.46f, -1.1f, -2.11f, -0.55f, 5.4f, -4.42f, 7.62f,
				3.73f, 7.23f, 2.79f, 4.63f, 3.53f, 1.42f, -4.22f, 9.9f, 9.76f,
				8.47f, 1.08f, 9f, 0.79f, -4.58f, -1.93f, 8.55f, 7.56f, 4.37f,
				-2.92f, -1.04f, -1.73f, 0.01f, 8.47f, -3.51f, 9.74f, 9.45f,
				2.59f, 6.46f, 5.27f, 5.96f, -3.67f, 3.11f, -3.55f, 9.95f,
				3.41f, 6.57f, 8.57f, 1.89f, 1.53f, 7.22f, 6.5f, 0.28f, 8.45f,
				1.02f, 1.42f, 4.39f, -1.57f, -1.12f, 4.79f, -3.62f, 3.77f,
				2.41f, 3.44f, 4.38f, 0.78f, 8.81f, 5.85f, -1.57f, -3.81f,
				4.59f, -0.53f, 1.86f, 3.76f, 2.6f, 0.59f, -3.23f, 6.78f, 3.97f,
				-0.25f, 3.9f, 1.13f, -0.86f };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		int[] outInteger = new int[1];
		int[] expectedMin = { 62 - 1 };

		RetCode rc = core.maxIndex(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outInteger);
		assertArrayEquals(expectedMin, outInteger);
	}

	@Test
	public void testMinFloat() {
		float[] inputsinReal = new float[] { 5.13f, 2.08f, -2.71f, 6.56f,
				5.29f, 3.3f, 6.33f, -2.52f, 1.5f, 4.83f, -2.37f, -2.86f,
				-1.33f, 5.55f, 6.81f, -2.75f, -3.6f, 0.57f, 9.07f, 5.01f,
				0.76f, 7.46f, -1.1f, -2.11f, -0.55f, 5.4f, -4.42f, 7.62f,
				3.73f, 7.23f, 2.79f, 4.63f, 3.53f, 1.42f, -4.22f, 9.9f, 9.76f,
				8.47f, 1.08f, 9f, 0.79f, -4.58f, -1.93f, 8.55f, 7.56f, 4.37f,
				-2.92f, -1.04f, -1.73f, 0.01f, 8.47f, -3.51f, 9.74f, 9.45f,
				2.59f, 6.46f, 5.27f, 5.96f, -3.67f, 3.11f, -3.55f, 9.95f,
				3.41f, 6.57f, 8.57f, 1.89f, 1.53f, 7.22f, 6.5f, 0.28f, 8.45f,
				1.02f, 1.42f, 4.39f, -1.57f, -1.12f, 4.79f, -3.62f, 3.77f,
				2.41f, 3.44f, 4.38f, 0.78f, 8.81f, 5.85f, -1.57f, -3.81f,
				4.59f, -0.53f, 1.86f, 3.76f, 2.6f, 0.59f, -3.23f, 6.78f, 3.97f,
				-0.25f, 3.9f, 1.13f, -0.86f };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outDouble = new double[1];
		double[] expectedMin = { -4.58f };

		RetCode rc = core.min(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outDouble);
		assertArrayEquals(expectedMin, outDouble, 0);
	}

	@Test
	public void testMaxFloat() {
		float[] inputsinReal = new float[] { 5.13f, 2.08f, -2.71f, 6.56f,
				5.29f, 3.3f, 6.33f, -2.52f, 1.5f, 4.83f, -2.37f, -2.86f,
				-1.33f, 5.55f, 6.81f, -2.75f, -3.6f, 0.57f, 9.07f, 5.01f,
				0.76f, 7.46f, -1.1f, -2.11f, -0.55f, 5.4f, -4.42f, 7.62f,
				3.73f, 7.23f, 2.79f, 4.63f, 3.53f, 1.42f, -4.22f, 9.9f, 9.76f,
				8.47f, 1.08f, 9f, 0.79f, -4.58f, -1.93f, 8.55f, 7.56f, 4.37f,
				-2.92f, -1.04f, -1.73f, 0.01f, 8.47f, -3.51f, 9.74f, 9.45f,
				2.59f, 6.46f, 5.27f, 5.96f, -3.67f, 3.11f, -3.55f, 9.95f,
				3.41f, 6.57f, 8.57f, 1.89f, 1.53f, 7.22f, 6.5f, 0.28f, 8.45f,
				1.02f, 1.42f, 4.39f, -1.57f, -1.12f, 4.79f, -3.62f, 3.77f,
				2.41f, 3.44f, 4.38f, 0.78f, 8.81f, 5.85f, -1.57f, -3.81f,
				4.59f, -0.53f, 1.86f, 3.76f, 2.6f, 0.59f, -3.23f, 6.78f, 3.97f,
				-0.25f, 3.9f, 1.13f, -0.86f };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outDouble = new double[1];
		double[] expectedMax = { 9.95f };

		RetCode rc = core.max(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outDouble);

		assertArrayEquals(expectedMax, outDouble, 0);
	}

	@Test
	public void wmaFloat() {
		float[] inputsinReal = new float[] { 5.13f, 2.08f, -2.71f, 6.56f,
				5.29f, 3.3f, 6.33f, -2.52f, 1.5f, 4.83f, -2.37f, -2.86f,
				-1.33f, 5.55f, 6.81f, -2.75f, -3.6f, 0.57f, 9.07f, 5.01f,
				0.76f, 7.46f, -1.1f, -2.11f, -0.55f, 5.4f, -4.42f, 7.62f,
				3.73f, 7.23f, 2.79f, 4.63f, 3.53f, 1.42f, -4.22f, 9.9f, 9.76f,
				8.47f, 1.08f, 9f, 0.79f, -4.58f, -1.93f, 8.55f, 7.56f, 4.37f,
				-2.92f, -1.04f, -1.73f, 0.01f, 8.47f, -3.51f, 9.74f, 9.45f,
				2.59f, 6.46f, 5.27f, 5.96f, -3.67f, 3.11f, -3.55f, 9.95f,
				3.41f, 6.57f, 8.57f, 1.89f, 1.53f, 7.22f, 6.5f, 0.28f, 8.45f,
				1.02f, 1.42f, 4.39f, -1.57f, -1.12f, 4.79f, -3.62f, 3.77f,
				2.41f, 3.44f, 4.38f, 0.78f, 8.81f, 5.85f, -1.57f, -3.81f,
				4.59f, -0.53f, 1.86f, 3.76f, 2.6f, 0.59f, -3.23f, 6.78f, 3.97f,
				-0.25f, 3.9f, 1.13f, -0.86f };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[1];
		// double[] expectedWma = { 2,68833861386139 };
		// double[] expectedWma = { 2.688338613861387f };

		RetCode rc = core.wma(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outReal);
		double[] val2 = new double[1];
		val2[0] = 2.688338613861387;
		val2[0] *= 100;
		val2[0] = Math.round(val2[0]);
		val2[0] /= 10000;
		double[] val = new double[1];
		val[0] = outReal[0];
		val[0] *= 100;
		val[0] = Math.round(val[0]);
		val[0] /= 10000;
		assertArrayEquals(val2, val, 0);
	}

	@Test
	public void wmaDouble() {
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[1];
		// double[] expectedWma = { 2,68833861386139 };
		// double[] expectedWma = { 3.036157028362376 };

		RetCode rc = core.wma(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outReal);
		double[] val2 = new double[1];
		val2[0] = 3.036157028362376;
		val2[0] *= 100;
		val2[0] = Math.round(val2[0]);
		val2[0] /= 10000;
		double[] val = new double[1];
		val[0] = outReal[0];
		val[0] *= 100;
		val[0] = Math.round(val[0]);
		val[0] /= 10000;
		assertArrayEquals(val2, val, 0);
	}

	/*
	 * @Test public void linearReg() { double[] inputsinReal = new double[] {
	 * -3.74899758, 8.79802864, -0.14931231, -1.56997335, 8.905047, 2.43794917,
	 * -2.57177967, 1.50790575, 6.28525889, -1.23445402, 9.88264006,
	 * -1.54691191, -1.51678414, -3.87081489, 4.07341677, -0.83149575,
	 * 6.45639026, -1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
	 * 0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663, 2.19858521,
	 * 5.48588226, 9.68097963, 7.19059048, 8.10866271, -4.529799, 6.25455656,
	 * -4.83669727, -1.99595817, 3.38484571, -1.7680024, 7.80204145, 6.92049361,
	 * 4.10760653, 5.48334737, 2.01051649, -0.5360123, 6.4349846, -2.66170544,
	 * 1.19188141, 7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
	 * 9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438, 9.18354848,
	 * 2.41393234, -4.37380726, 3.33243095, 9.37342345, 2.10308501, 7.85515609,
	 * 1.46622299, -2.80063882, -2.75484542, -2.71461047, 7.27986801, 4.844885,
	 * 4.02320845, 3.95716224, 8.23032752, 8.35721476, 2.20199541, 8.31864306,
	 * -1.95679191, 5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
	 * 3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628, -0.00423427,
	 * 2.04744304, 3.39087975, 6.80225727, -0.41025659, 7.66486885, -3.10303327,
	 * -2.95132038, 6.28905328, -4.18467174, 3.64449126, 4.01208808, 6.83494132
	 * }; MInteger outBegIdx = new MInteger(); MInteger outNBElement = new
	 * MInteger(); double[] outReal = new double[100]; //double[] expectedWma =
	 * { 2,68833861386139 }; //double[] expectedWma = { -0.00174917491749175 };
	 * 
	 * 
	 * RetCode rc = core.linearReg(0, 99, inputsinReal, 100, outBegIdx,
	 * outNBElement, outReal); //System.out.println(outReal[i]);
	 * 
	 * 
	 * double[] val2 = new double[1]; val2[0] = -0.00174917491749175; val2[0] *=
	 * 100; val2[0] = Math.round(val2[0]); val2[0] /= 10000; double[] val = new
	 * double[1]; val[0] = outReal[6]; val[0] *= 100; val[0] =
	 * Math.round(val[0]); val[0] /= 10000; for(int i=0;i<100;i++){
	 * System.out.println(outReal[i]); } assertArrayEquals(val2, val, 0);
	 * 
	 * }
	 */
	/*
	 * @Test public void linearReg() { double[] inputsinReal = new double[] {
	 * -3.74899758, 8.79802864, -0.14931231, -1.56997335, 8.905047, 2.43794917,
	 * -2.57177967, 1.50790575, 6.28525889, -1.23445402, 9.88264006,
	 * -1.54691191, -1.51678414, -3.87081489, 4.07341677, -0.83149575,
	 * 6.45639026, -1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
	 * 0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663, 2.19858521,
	 * 5.48588226, 9.68097963, 7.19059048, 8.10866271, -4.529799, 6.25455656,
	 * -4.83669727, -1.99595817, 3.38484571, -1.7680024, 7.80204145, 6.92049361,
	 * 4.10760653, 5.48334737, 2.01051649, -0.5360123, 6.4349846, -2.66170544,
	 * 1.19188141, 7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
	 * 9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438, 9.18354848,
	 * 2.41393234, -4.37380726, 3.33243095, 9.37342345, 2.10308501, 7.85515609,
	 * 1.46622299, -2.80063882, -2.75484542, -2.71461047, 7.27986801, 4.844885,
	 * 4.02320845, 3.95716224, 8.23032752, 8.35721476, 2.20199541, 8.31864306,
	 * -1.95679191, 5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
	 * 3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628, -0.00423427,
	 * 2.04744304, 3.39087975, 6.80225727, -0.41025659, 7.66486885, -3.10303327,
	 * -2.95132038, 6.28905328, -4.18467174, 3.64449126, 4.01208808, 6.83494132
	 * }; MInteger outBegIdx = new MInteger(); MInteger outNBElement = new
	 * MInteger(); double[] outReal = new double[100]; //double[] expectedWma =
	 * { 2,68833861386139 }; //double[] expectedWma = { -0.00174917491749175 };
	 * 
	 * 
	 * RetCode rc = core.tsf(0, 99, inputsinReal, 100, outBegIdx, outNBElement,
	 * outReal); //System.out.println(outReal[i]);
	 * 
	 * 
	 * double[] val2 = new double[1]; val2[0] = 2.6265458688495; val2[0] *= 100;
	 * val2[0] = Math.round(val2[0]); val2[0] /= 10000; double[] val = new
	 * double[1]; val[0] = outReal[0]; val[0] *= 100; val[0] =
	 * Math.round(val[0]); val[0] /= 10000; assertArrayEquals(val2, val, 0);
	 * 
	 * }
	 */
	@Test
	public void stdDevDouble() {
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[1];
		double optInNbDev = 1;
		double[] expectedWma = { 4.313824434190533 };

		RetCode rc = core.stdDev(0, 99, inputsinReal, 100, optInNbDev,
				outBegIdx, outNBElement, outReal);
		double[] val2 = new double[1];
		val2[0] = 4.31382443419053300;
		val2[0] *= 100;
		val2[0] = Math.round(val2[0]);
		val2[0] /= 10000;
		double[] val = new double[1];
		val[0] = outReal[0];
		val[0] *= 100;
		val[0] = Math.round(val[0]);
		val[0] /= 10000;
		assertArrayEquals(val2, val, 0);

	}

	@Test
	public void stdDevFloat() {
		float[] inputsinReal = new float[] { 5.13f, 2.08f, -2.71f, 6.56f,
				5.29f, 3.3f, 6.33f, -2.52f, 1.5f, 4.83f, -2.37f, -2.86f,
				-1.33f, 5.55f, 6.81f, -2.75f, -3.6f, 0.57f, 9.07f, 5.01f,
				0.76f, 7.46f, -1.1f, -2.11f, -0.55f, 5.4f, -4.42f, 7.62f,
				3.73f, 7.23f, 2.79f, 4.63f, 3.53f, 1.42f, -4.22f, 9.9f, 9.76f,
				8.47f, 1.08f, 9f, 0.79f, -4.58f, -1.93f, 8.55f, 7.56f, 4.37f,
				-2.92f, -1.04f, -1.73f, 0.01f, 8.47f, -3.51f, 9.74f, 9.45f,
				2.59f, 6.46f, 5.27f, 5.96f, -3.67f, 3.11f, -3.55f, 9.95f,
				3.41f, 6.57f, 8.57f, 1.89f, 1.53f, 7.22f, 6.5f, 0.28f, 8.45f,
				1.02f, 1.42f, 4.39f, -1.57f, -1.12f, 4.79f, -3.62f, 3.77f,
				2.41f, 3.44f, 4.38f, 0.78f, 8.81f, 5.85f, -1.57f, -3.81f,
				4.59f, -0.53f, 1.86f, 3.76f, 2.6f, 0.59f, -3.23f, 6.78f, 3.97f,
				-0.25f, 3.9f, 1.13f, -0.86f };
		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[1];
		double optInNbDev = 1;
		double[] expectedWma = { 4.12119426380267 };

		RetCode rc = core.stdDev(0, 99, inputsinReal, 100, optInNbDev,
				outBegIdx, outNBElement, outReal);
		double[] val2 = new double[1];
		val2[0] = 4.12119426380267;
		val2[0] *= 100;
		val2[0] = Math.round(val2[0]);
		val2[0] /= 10000;
		double[] val = new double[1];
		val[0] = outReal[0];
		val[0] *= 100;
		val[0] = Math.round(val[0]);
		val[0] /= 10000;
		assertArrayEquals(val2, val, 0);

	}

	/*
	 * @Test public void stdMidPrice() { float[] inLow = new float[] { -5.09f,
	 * -9.84f, -5.55f, -5.83f, -7.64f, -1.83f, -5.19f, -8.25f, -9.74f, 0.02f,
	 * -3.56f, -9.69f, -2.42f, -3f, -9.15f, -9.34f, -3.36f, -0.06f, -2.7f,
	 * -2.05f, -8.27f, -8.34f, -0.32f, 0.17f, -0.91f, -9.15f, -2.37f, -6.51f,
	 * -2.92f, -4.48f, -9.79f, -3.45f, -9.44f, -6.36f, -5.65f, -3.2f, -7.8f,
	 * -6.45f, 0.22f, -9.04f, -6.25f, -9.8f, 0.28f, -5.75f, 0.8f, -4.8f, -9.18f,
	 * -0.37f, -3.33f, -1.5f, -9.92f, -9.73f, 0.51f, 0.85f, -4.49f, -7.44f,
	 * -0.1f, -4.36f, -9.49f, -0.68f, -7.77f, -2.56f, -6.89f, -8.51f, -6.7f,
	 * -3.18f, 0.72f, -6.76f, -0.05f, -2.12f, 0.11f, -1.87f, -6.77f, -1.89f,
	 * -4.74f, -9.45f, -9.55f, -0.67f, 0.78f, -3.2f, -5.9f, -3.84f, -8.64f,
	 * -7.13f, -8.92f, -0.65f, -4.8f, -7.11f, -6.64f, -2.13f, -8.94f, -9.38f,
	 * -8.29f, -1.48f, -8.76f, -6.29f, -4.56f, -5.33f, -8.45f, -0.81f }; float[]
	 * inHigh = new float[] { 5.38f, 8.95f, 5.77f, 3.85f, 4.25f, 3.35f, 5.67f,
	 * 6.37f, 4.31f, 9.72f, 7.32f, 8.95f, 2.32f, 8.03f, 7.14f, 5.27f, 5.36f,
	 * 6.75f, 5.83f, 5.59f, 1.12f, 8.08f, 2.11f, 8.89f, 3.03f, 2.04f, 1.96f,
	 * 3.29f, 2.9f, 2.82f, 8.63f, 1.86f, 9f, 9.98f, 6.86f, 8.05f, 6.45f, 6.4f,
	 * 9.56f, 6.23f, 8.14f, 5.6f, 5.9f, 5.9f, 1.05f, 6.77f, 7.23f, 4.97f, 8.01f,
	 * 5.31f, 9.72f, 9.65f, 1.76f, 4.97f, 8.85f, 5.94f, 9.83f, 1.7f, 9.54f,
	 * 4.4f, 3.07f, 6.39f, 5.3f, 7.76f, 5.37f, 7.14f, 7.23f, 8.99f, 5.72f,
	 * 5.33f, 8.83f, 1.19f, 9.41f, 8.92f, 4.36f, 8.62f, 6.57f, 1.57f, 2.73f,
	 * 3.49f, 3.94f, 7.1f, 8.68f, 1.03f, 9.89f, 3.01f, 9.58f, 6.56f, 8.44f,
	 * 6.2f, 5.78f, 4.68f, 9.32f, 1.64f, 9.88f, 5.48f, 4.31f, 8.62f, 6.2f, 3.27f
	 * }; MInteger outBegIdx = new MInteger(); MInteger outNBElement = new
	 * MInteger(); double[] outReal = new double[1]; double optInNbDev = 1;
	 * double[] expectedMidPrice = { 4.12119426380267 };
	 * 
	 * RetCode rc = core.midPrice(0, 99, inHigh, inLow, 100, outBegIdx,
	 * outNBElement, outReal); assertArrayEquals(expectedMidPrice, outReal, 0);
	 * 
	 * }
	 */

	@Test
	public void sumFloat() {
		float[] inReal = new float[] { 5.13f, 2.08f, -2.71f, 6.56f, 5.29f,
				3.3f, 6.33f, -2.52f, 1.5f, 4.83f, -2.37f, -2.86f, -1.33f,
				5.55f, 6.81f, -2.75f, -3.6f, 0.57f, 9.07f, 5.01f, 0.76f, 7.46f,
				-1.1f, -2.11f, -0.55f, 5.4f, -4.42f, 7.62f, 3.73f, 7.23f,
				2.79f, 4.63f, 3.53f, 1.42f, -4.22f, 9.9f, 9.76f, 8.47f, 1.08f,
				9f, 0.79f, -4.58f, -1.93f, 8.55f, 7.56f, 4.37f, -2.92f, -1.04f,
				-1.73f, 0.01f, 8.47f, -3.51f, 9.74f, 9.45f, 2.59f, 6.46f,
				5.27f, 5.96f, -3.67f, 3.11f, -3.55f, 9.95f, 3.41f, 6.57f,
				8.57f, 1.89f, 1.53f, 7.22f, 6.5f, 0.28f, 8.45f, 1.02f, 1.42f,
				4.39f, -1.57f, -1.12f, 4.79f, -3.62f, 3.77f, 2.41f, 3.44f,
				4.38f, 0.78f, 8.81f, 5.85f, -1.57f, -3.81f, 4.59f, -0.53f,
				1.86f, 3.76f, 2.6f, 0.59f, -3.23f, 6.78f, 3.97f, -0.25f, 3.9f,
				1.13f, -0.86f };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[1];

		RetCode rc = core.sum(0, 99, inReal, 100, outBegIdx, outNBElement,
				outReal);
		double[] val2 = new double[1];
		val2[0] = 271.72;
		val2[0] *= 100;
		val2[0] = Math.round(val2[0]);
		val2[0] /= 100;
		double[] val = new double[1];
		val[0] = outReal[0];
		val[0] *= 100;
		val[0] = Math.round(val[0]);
		val[0] /= 100;
		assertArrayEquals(val2, val, 0);

	}

	@Test
	public void sumDouble() {
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[1];

		RetCode rc = core.sum(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outReal);
		double[] val2 = new double[1];
		val2[0] = 293.37584647;
		val2[0] *= 100;
		val2[0] = Math.round(val2[0]);
		val2[0] /= 100;
		double[] val = new double[1];
		val[0] = outReal[0];
		val[0] *= 100;
		val[0] = Math.round(val[0]);
		val[0] /= 100;
		assertArrayEquals(val2, val, 0);

	}

	@Test
	public void rocDouble() {
		/*
		 * Pojebana metoda ale rozgzys³em. A mianowicie formu³a jest prost
		 * bierze ((cene/cena poprzednia)-1)*100 tylko, ¿e trzeba odpowiednio
		 * inTimePeriod ustawic i w tym przypadku nie jest to 100 (liczba
		 * elementów) tylko 1. Liczba od którego ma siê zacz¹c liczenie z
		 * tablicy 0 nie mo¿e byc bo nie ma poprzedniej ceny, musi byc 1.
		 */
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		double[] expectedRoc = new double[] { -334.6768289991801,
				-101.69711097917045, 951.4694669180324, -667.2100739799182,
				-72.62283770091275, -205.48947047981318, -158.63277354548805,
				316.8204073762568, -119.64046416551028, -900.5676922660917,
				-115.65282050755981, -1.9476073463032595, 155.19879776696507,
				-205.23408857714713, -120.41273449168817, -876.4790451424435,
				-121.78754727258385, -692.914375222135, 10.34977323563706,
				-78.56230746120032, 178.9017331665613, -92.92621267426867,
				1622.1547684892491, -46.790766328562896, -172.09982049097988,
				-392.9953569723688, -70.82261224223824, 149.51874664889607,
				76.47078758121214, -25.724557278094384, 12.767689003476669,
				-155.86369987265138, -238.07580777866747, -177.33077834697846,
				-58.73303499104463, -269.5850023750748, -152.232880062353,
				-541.2913381791789, -11.298938177263839, -40.64575792592922,
				33.492517600024364, -63.334139635220666, -126.66042793809665,
				-1300.5292788990105, -141.3630428890226, -144.7788621568884,
				564.4402592033045, -142.53408074124684, -170.86965804640352,
				-9.304876175517107, -110.55285778045688, -4475.544799254539,
				-106.18657333655763, -1589.9307471668494, -148.5632642995939,
				-184.14219152381082, 143.89340274098993, -73.7146012213353,
				-281.1901347657491, -176.19062185195605, 181.27884990385175,
				-77.56332015492163, 273.50635150977564, -81.3342602845719,
				-291.01042877523014, -1.635105522103708, -1.460515704725085,
				-368.17357740464325, -33.448175250638926, -16.959670869380794,
				-1.6416303261641896, 107.98559727487947, 1.5417034096353976,
				-73.65156366999955, 277.7774931874177, -123.52296998303952,
				-404.76050414578833, -95.69939586559126, 1988.3831640911453,
				-84.29778170779497, -157.8639491867617, -910.8145742530019,
				15.840512281920805, 94.65024428715414, -96.90480407628749,
				2861.408435370909, -100.05192100190384, -48454.09740049642,
				65.61533990220308, 100.60449710727725, -106.03118308696371,
				-1968.3109636337595, -140.483840372559, -4.889180256839465,
				-313.0928693007569, -166.53897738961433, -187.09144913717893,
				10.08636854297189, 70.3587055845494 };
		double[] expectedRoc2 = new double[] { -334.6768289991801,
				-101.69711097917045, 951.4694669180324, -667.2100739799182,
				-72.62283770091275, -205.48947047981318, -158.63277354548805,
				316.8204073762568, -119.64046416551028 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[99];

		RetCode rc = core.roc(0, 99, inputsinReal, 1, outBegIdx, outNBElement,
				outReal);

		assertArrayEquals(expectedRoc, outReal, 0);

		RetCode rb = core.roc(-10, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeStartIndex.toString(), rb.toString());

		RetCode rb1 = core.roc(0, -2, inputsinReal, 1, outBegIdx, outNBElement,
				outReal);
		assertEquals(RetCode.OutOfRangeEndIndex.toString(), rb1.toString());

		RetCode rb2 = core.roc(0, 99, inputsinReal, 0, outBegIdx, outNBElement,
				outReal);
		assertEquals(RetCode.BadParam.toString(), rb2.toString());

	}

	@Test
	public void testmidPrice() {
		/*
		 * Szuka maksa i minumum w tablicach maks i min (ja u¿y³em tej samej) po
		 * czym (maks+min)/2 œrednia z odchyleñ maksymalnych
		 */
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[1];
		double[] expect = new double[] { 2.580184045 };
		double[] expect2 = new double[] { 3.005912585 };
		int minvalue = Integer.MIN_VALUE;

		RetCode rc = core.midPrice(0, 99, inputsinReal, inputsinReal, 100,
				outBegIdx, outNBElement, outReal);
		assertArrayEquals(expect, outReal, 0);

		RetCode rmin = core.midPrice(0, 13, inputsinReal, inputsinReal,
				minvalue, outBegIdx, outNBElement, outReal);
		assertArrayEquals(expect2, outReal, 0);

		RetCode rb = core.midPrice(-1, 99, inputsinReal, inputsinReal, 100,
				outBegIdx, outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeStartIndex.toString(), rb.toString());

		RetCode rb1 = core.midPrice(5, 4, inputsinReal, inputsinReal, 100,
				outBegIdx, outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeEndIndex.toString(), rb1.toString());

		RetCode rb2 = core.midPrice(0, 99, inputsinReal, inputsinReal, 1,
				outBegIdx, outNBElement, outReal);
		assertEquals(RetCode.BadParam.toString(), rb2.toString());

	}

	@Test
	public void testrocP() {
		/**
		 * taki sam pojebys jak wy¿ej tylko wzór to (cena-cena poprzednia)/cena
		 * poprzednia
		 */
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		double[] expect = new double[] { -3.3467682899918008,
				-1.0169711097917045, 9.514694669180324, -6.672100739799182,
				-0.7262283770091276, -2.054894704798132, -1.5863277354548806,
				3.168204073762568, -1.196404641655103, -9.005676922660918,
				-1.156528205075598, -0.019476073463032553, 1.5519879776696506,
				-2.0523408857714713, -1.2041273449168817, -8.764790451424437,
				-1.2178754727258387, -6.92914375222135, 0.10349773235637068,
				-0.7856230746120032, 1.7890173316656133, -0.9292621267426868,
				16.221547684892492, -0.467907663285629, -1.7209982049097985,
				-3.929953569723689, -0.7082261224223824, 1.495187466488961,
				0.7647078758121212, -0.25724557278094384, 0.12767689003476676,
				-1.5586369987265138, -2.3807580777866746, -1.7733077834697843,
				-0.5873303499104463, -2.6958500237507486, -1.5223288006235296,
				-5.412913381791789, -0.11298938177263845, -0.4064575792592922,
				0.3349251760002436, -0.6333413963522067, -1.2666042793809664,
				-13.005292788990104, -1.4136304288902262, -1.447788621568884,
				5.644402592033045, -1.4253408074124683, -1.708696580464035,
				-0.09304876175517111, -1.1055285778045687, -44.755447992545385,
				-1.0618657333655765, -15.899307471668493, -1.485632642995939,
				-1.8414219152381082, 1.4389340274098992, -0.7371460122133531,
				-2.8119013476574906, -1.7619062185195604, 1.8127884990385175,
				-0.7756332015492162, 2.7350635150977562, -0.8133426028457189,
				-2.9101042877523016, -0.01635105522103703,
				-0.014605157047250905, -3.681735774046433, -0.3344817525063893,
				-0.16959670869380788, -0.01641630326164186, 1.0798559727487944,
				0.015417034096353956, -0.7365156366999954, 2.7777749318741765,
				-1.235229699830395, -4.047605041457883, -0.9569939586559126,
				19.883831640911453, -0.8429778170779496, -1.578639491867617,
				-9.108145742530018, 0.1584051228192081, 0.9465024428715413,
				-0.9690480407628749, 28.614084353709085, -1.0005192100190383,
				-484.54097400496426, 0.6561533990220307, 1.0060449710727726,
				-1.0603118308696373, -19.683109636337594, -1.40483840372559,
				-0.048891802568394704, -3.130928693007568, -1.6653897738961434,
				-1.8709144913717892, 0.10086368542971885, 0.703587055845494 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[99];

		RetCode rc = core.rocP(0, 99, inputsinReal, 1, outBegIdx, outNBElement,
				outReal);

		assertArrayEquals(expect, outReal, 0);

		RetCode rb = core.rocP(-10, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeStartIndex.toString(), rb.toString());

		RetCode rb1 = core.rocP(1000, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeEndIndex.toString(), rb1.toString());

		RetCode rb2 = core.rocP(0, 99, inputsinReal, 0, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.BadParam.toString(), rb2.toString());
	}

	@Test
	public void testRocR() {
		/**
		 * znów to samo tylko cena/poprzednia cena
		 */
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		double[] expect = new double[] { -2.3467682899918008,
				-0.01697110979170443, 10.514694669180324, -5.672100739799182,
				0.2737716229908725, -1.0548947047981316, -0.5863277354548805,
				4.168204073762568, -0.19640464165510294, -8.005676922660918,
				-0.15652820507559798, 0.9805239265369674, 2.5519879776696506,
				-1.0523408857714711, -0.20412734491688167, -7.764790451424436,
				-0.2178754727258386, -5.92914375222135, 1.1034977323563706,
				0.2143769253879968, 2.789017331665613, 0.07073787325731327,
				17.221547684892492, 0.5320923367143711, -0.7209982049097987,
				-2.9299535697236885, 0.29177387757761764, 2.495187466488961,
				1.7647078758121213, 0.7427544272190562, 1.1276768900347667,
				-0.5586369987265137, -1.3807580777866746, -0.7733077834697845,
				0.41266965008955375, -1.6958500237507483, -0.5223288006235298,
				-4.412913381791789, 0.8870106182273616, 0.5935424207407078,
				1.3349251760002436, 0.36665860364779335, -0.2666042793809664,
				-12.005292788990104, -0.4136304288902261, -0.447788621568884,
				6.644402592033045, -0.4253408074124683, -0.7086965804640352,
				0.9069512382448289, -0.10552857780456869, -43.755447992545385,
				-0.061865733365576395, -14.899307471668493,
				-0.4856326429959391, -0.8414219152381082, 2.4389340274098994,
				0.2628539877866469, -1.8119013476574908, -0.7619062185195604,
				2.8127884990385175, 0.22436679845078372, 3.7350635150977562,
				0.1866573971542811, -1.9101042877523018, 0.9836489447789629,
				0.9853948429527492, -2.6817357740464325, 0.6655182474936108,
				0.8304032913061921, 0.9835836967383581, 2.0798559727487946,
				1.015417034096354, 0.2634843633000045, 3.777774931874177,
				-0.23522969983039518, -3.0476050414578832,
				0.043006041344087455, 20.883831640911453, 0.15702218292205036,
				-0.578639491867617, -8.108145742530018, 1.158405122819208,
				1.9465024428715414, 0.030951959237125074, 29.61408435370909,
				-5.192100190382689E-4, -483.54097400496426, 1.6561533990220307,
				2.0060449710727726, -0.060311830869637185, -18.683109636337594,
				-0.40483840372559016, 0.9511081974316054, -2.1309286930075686,
				-0.6653897738961435, -0.8709144913717892, 1.100863685429719,
				1.703587055845494 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[99];

		RetCode rc = core.rocR(0, 99, inputsinReal, 1, outBegIdx, outNBElement,
				outReal);
		assertArrayEquals(expect, outReal, 0);

		RetCode rb = core.rocR(-10, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeStartIndex.toString(), rb.toString());

		RetCode rb1 = core.rocR(150, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeEndIndex.toString(), rb1.toString());

		RetCode rb2 = core.rocR(0, 99, inputsinReal, 0, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.BadParam.toString(), rb2.toString());
	}

	@Test
	public void testrocR100() {
		/**
		 * znów to samo tylko (cena/poprzednia cena)*100
		 */
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		double[] expect = new double[] { -234.6768289991801,
				-1.6971109791704428, 1051.4694669180324, -567.2100739799182,
				27.37716229908725, -105.48947047981316, -58.63277354548805,
				416.8204073762568, -19.640464165510295, -800.5676922660917,
				-15.652820507559797, 98.05239265369674, 255.19879776696507,
				-105.2340885771471, -20.412734491688166, -776.4790451424436,
				-21.78754727258386, -592.914375222135, 110.34977323563706,
				21.43769253879968, 278.9017331665613, 7.0737873257313275,
				1722.1547684892491, 53.209233671437104, -72.09982049097987,
				-292.9953569723688, 29.177387757761764, 249.51874664889607,
				176.47078758121214, 74.27544272190562, 112.76768900347666,
				-55.863699872651374, -138.07580777866747, -77.33077834697845,
				41.266965008955374, -169.58500237507482, -52.23288006235298,
				-441.29133817917887, 88.70106182273616, 59.35424207407078,
				133.49251760002437, 36.665860364779334, -26.660427938096642,
				-1200.5292788990105, -41.36304288902261, -44.7788621568884,
				664.4402592033045, -42.53408074124683, -70.86965804640352,
				90.69512382448289, -10.552857780456868, -4375.544799254539,
				-6.18657333655764, -1489.9307471668494, -48.56326429959391,
				-84.14219152381082, 243.89340274098993, 26.285398778664693,
				-181.19013476574906, -76.19062185195604, 281.2788499038517,
				22.436679845078373, 373.50635150977564, 18.66573971542811,
				-191.01042877523017, 98.36489447789629, 98.53948429527492,
				-268.17357740464325, 66.55182474936107, 83.0403291306192,
				98.35836967383581, 207.98559727487947, 101.5417034096354,
				26.348436330000453, 377.7774931874177, -23.52296998303952,
				-304.76050414578833, 4.300604134408745, 2088.3831640911453,
				15.702218292205036, -57.8639491867617, -810.8145742530019,
				115.84051228192081, 194.65024428715415, 3.0951959237125073,
				2961.408435370909, -0.05192100190382689, -48354.09740049642,
				165.61533990220306, 200.60449710727727, -6.031183086963718,
				-1868.3109636337595, -40.483840372559015, 95.11081974316053,
				-213.09286930075686, -66.53897738961435, -87.09144913717893,
				110.0863685429719, 170.3587055845494 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[99];

		RetCode rc = core.rocR100(0, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertArrayEquals(expect, outReal, 0);

		RetCode rb = core.rocR100(-90, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeStartIndex.toString(), rb.toString());

		RetCode rb1 = core.rocR100(1230, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeEndIndex.toString(), rb1.toString());

		RetCode rb2 = core.rocR100(0, 99, inputsinReal, 0, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.BadParam.toString(), rb2.toString());
	}

	@Test
	public void testmidPoint() {
		/*
		 * Szuka maksa i minumum w tablicach maks i min (ja u¿y³em tej samej) po
		 * czym (maks+min)/2 œrednia z odchyleñ maksymalnych
		 */
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[1];
		double[] expect = new double[] { 2.580184045 };
		double[] expect2 = new double[] { 3.005912585 };
		int minvalue = Integer.MIN_VALUE;

		RetCode rc = core.midPoint(0, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outReal);
		assertArrayEquals(expect, outReal, 0);

		RetCode rmin = core.midPoint(0, 13, inputsinReal, minvalue, outBegIdx,
				outNBElement, outReal);
		assertArrayEquals(expect2, outReal, 0);

		RetCode rb = core.midPoint(-1, 99, inputsinReal, 100, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeStartIndex.toString(), rb.toString());

		RetCode rb1 = core.midPoint(5, 4, inputsinReal, 100, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeEndIndex.toString(), rb1.toString());

		RetCode rb2 = core.midPoint(0, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.BadParam.toString(), rb2.toString());

	}

	@Test
	public void testmom() {
		/**
		 * momentum czyli cena-poprzednia cena taki sam pojebus jak roc i ca³a reszta roc
		 */
		double[] inputsinReal = new double[] { -3.74899758, 8.79802864,
				-0.14931231, -1.56997335, 8.905047, 2.43794917, -2.57177967,
				1.50790575, 6.28525889, -1.23445402, 9.88264006, -1.54691191,
				-1.51678414, -3.87081489, 4.07341677, -0.83149575, 6.45639026,
				-1.40668908, 8.34046177, 9.20368065, 1.97305676, 5.5028895,
				0.3892627, 6.70370615, 3.56699067, -2.57179387, 7.53523663,
				2.19858521, 5.48588226, 9.68097963, 7.19059048, 8.10866271,
				-4.529799, 6.25455656, -4.83669727, -1.99595817, 3.38484571,
				-1.7680024, 7.80204145, 6.92049361, 4.10760653, 5.48334737,
				2.01051649, -0.5360123, 6.4349846, -2.66170544, 1.19188141,
				7.91933993, -3.36841844, 2.38718663, 2.16506187, -0.2284759,
				9.99706536, -0.61847578, 9.21486081, -4.47503721, 3.76539438,
				9.18354848, 2.41393234, -4.37380726, 3.33243095, 9.37342345,
				2.10308501, 7.85515609, 1.46622299, -2.80063882, -2.75484542,
				-2.71461047, 7.27986801, 4.844885, 4.02320845, 3.95716224,
				8.23032752, 8.35721476, 2.20199541, 8.31864306, -1.95679191,
				5.96352889, 0.25646777, 5.35602973, 0.84101548, -0.48664477,
				3.94578672, 4.57081955, 8.89711142, 0.27538303, 8.15521628,
				-0.00423427, 2.04744304, 3.39087975, 6.80225727, -0.41025659,
				7.66486885, -3.10303327, -2.95132038, 6.28905328, -4.18467174,
				3.64449126, 4.01208808, 6.83494132 };
		double[] expect = new double[] { 12.54702622, -8.947340950000001,
				-1.42066104, 10.47502035, -6.46709783, -5.00972884,
				4.079685420000001, 4.77735314, -7.51971291, 11.11709408,
				-11.42955197, 0.030127769999999998, -2.35403075, 7.94423166,
				-4.90491252, 7.28788601, -7.8630793400000005,
				9.747150849999999, 0.8632188800000016, -7.23062389,
				3.5298327400000002, -5.1136268000000005, 6.314443450000001,
				-3.1367154800000003, -6.13878454, 10.1070305, -5.33665142,
				3.2872970500000003, 4.195097369999999, -2.4903891499999995,
				0.9180722300000008, -12.638461710000001, 10.78435556,
				-11.09125383, 2.8407391000000004, 5.38080388, -5.15284811,
				9.57004385, -0.8815478399999996, -2.8128870800000003,
				1.3757408399999997, -3.4728308799999996, -2.54652879,
				6.9709969, -9.09669004, 3.85358685, 6.72745852,
				-11.287758369999999, 5.75560507, -0.2221247599999998,
				-2.39353777, 10.22554126, -10.615541140000001, 9.83333659,
				-13.68989802, 8.24043159, 5.418154100000001, -6.76961614,
				-6.7877396, 7.70623821, 6.040992500000001, -7.270338440000001,
				5.75207108, -6.388933100000001, -4.26686181,
				0.045793399999999984, 0.04023494999999988, 9.994478480000001,
				-2.4349830100000007, -0.8216765499999994, -0.0660462100000001,
				4.273165279999999, 0.1268872400000003, -6.155219349999999,
				6.116647649999999, -10.27543497, 7.9203208,
				-5.7070611200000005, 5.099561960000001, -4.51501425,
				-1.32766025, 4.43243149, 0.6250328300000003,
				4.3262918699999995, -8.62172839, 7.879833249999999,
				-8.159450549999999, 2.05167731, 1.3434367099999998,
				3.4113775200000003, -7.2125138600000005, 8.07512544,
				-10.76790212, 0.1517128900000002, 9.24037366, -10.47372502,
				7.829162999999999, 0.3675968199999997, 2.8228532400000006 };

		MInteger outBegIdx = new MInteger();
		MInteger outNBElement = new MInteger();
		double[] outReal = new double[99];

		RetCode rc = core.mom(0, 99, inputsinReal, 1, outBegIdx, outNBElement,
				outReal);
		assertArrayEquals(expect, outReal, 0);

		RetCode rb = core.mom(-90, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeStartIndex.toString(), rb.toString());

		RetCode rb1 = core.mom(1230, 99, inputsinReal, 1, outBegIdx,
				outNBElement, outReal);
		assertEquals(RetCode.OutOfRangeEndIndex.toString(), rb1.toString());

		RetCode rb2 = core.mom(0, 99, inputsinReal, 0, outBegIdx, outNBElement,
				outReal);
		assertEquals(RetCode.BadParam.toString(), rb2.toString());
	}
	
	@Test
	public void movingAveLookback(){
		
		int sma =29;
		int ema =29;
		int wma=29;
		int dema=ema*2;
		int tema=ema*3;
		int trima=29;
		int kama=30;
		int mama=30;
		int t3=30;
		int def =0;
		int minvaluesma = 29;
		int err = -1;
		
		int i = core.movingAverageLookback(Integer.MIN_VALUE, MAType.Sma);
		assertEquals(minvaluesma, i);
		
		i = core.movingAverageLookback(Integer.MAX_VALUE, MAType.Sma);
		assertEquals(err, i);
		
		i = core.movingAverageLookback(1, MAType.Sma);
		assertEquals(def, i);
	
		i = core.movingAverageLookback(30, MAType.Sma);
		assertEquals(sma, i);
		
		i = core.movingAverageLookback(30, MAType.Ema);
		assertEquals(ema, i);
		
		i = core.movingAverageLookback(30, MAType.Wma);
		assertEquals(wma, i);
		
		i = core.movingAverageLookback(30, MAType.Dema);
		assertEquals(dema, i);
		
		i = core.movingAverageLookback(30, MAType.Tema);
		assertEquals(tema, i);
		
		i = core.movingAverageLookback(30, MAType.Trima);
		assertEquals(trima, i);
		
		i = core.movingAverageLookback(30, MAType.Kama);
		assertEquals(kama, i);
		
		i = core.movingAverageLookback(30, MAType.Kama);
		assertEquals(mama, i);
		
		i = core.movingAverageLookback(30, MAType.Kama);
		assertEquals(t3, i);
		
	}
}
